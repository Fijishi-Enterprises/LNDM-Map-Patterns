---
output:
  github_document:
    html_preview: false
---

[![Travis build status](https://travis-ci.org/marcosci/landscapemetrics.svg?branch=master)](https://travis-ci.org/marcosci/landscapemetrics)
[![AppVeyor build status](https://ci.appveyor.com/api/projects/status/github/marcosci/landscapemetrics?branch=master&svg=true)](https://ci.appveyor.com/project/marcosci/landscapemetrics)
[![Coverage status](https://codecov.io/gh/marcosci/landscapemetrics/branch/master/graph/badge.svg)](https://codecov.io/github/marcosci/landscapemetrics?branch=master)
[![lifecycle](https://img.shields.io/badge/lifecycle-experimental-orange.svg)](https://www.tidyverse.org/lifecycle/#experimental)

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```
# landscapemetrics

**landscapemetrics** is an R package for calculating landscape metrics for categorical landscape patterns in a tidy workflow. 
It offers most of the metrics that are available in the standalone software FRAGSTATS (McGarigal, SA Cushman & Ene, 2012) but also allows for implementation of
future (meaningful) categorical landscape metrics.

This package supports `raster` spatial objects and takes `RasterLayer`, `RasterStacks`, `RasterBricks` or lists of `RasterLayer` as input arguments.

Every function can be used in a piped workflow, as it always takes the data as the first argument and returns a tibble of the same dimension.

## Installation

You can install **landscapemetrics** from GitHub with:

```{r gh-installation, eval = FALSE}
# install.packages("devtools")
devtools::install_github("marcosci/landscapemetrics")
```

## Using landscapemetrics

The functions in **landscapemetrics** starts with `lsm_` and next are named based on a combination of abbreviations describing the scale (patch - `p`, class - `c` or landscape - `l`) and metric they calculate:

```
# landscapemetrics
lsm_"level"_"metric" example:

# Patch level
## lsm_p_"metric" example:
lsm_p_enn()

# Class level
## lsm_c_"metric" example:
lsm_c_enn()

# Landscape level
## lsm_p_"metric" example:
lsm_l_enn()
```

...and returns a tibble with the same columns:

| layer  | level | class | id | metric | value
| ------------- | -------------  | ------------- | ------------- | ------------- | ------------- | 
| 1 | patch  | 1 | 1 | landscape metric | x |
| 1 | class  | 1 | NA | landscape metric | x |
| 1 | landscape  | NA | NA | landscape metric | x |

### Using metric functions

Every function follows the same implementation design, so the usage is quite straight forward:

```{r}
library(landscapemetrics)
library(tidyverse)

# Landscape raster
landscape

## plot landscape
landscapetools::util_plot(landscape)

# Calculate for example the Euclidean Nearest-Neighbor Distance on patch level
landscape %>% 
  lsm_p_enn()
```

### Connected labelling 
`landscapemetrics` makes internally heavy use of an implementatian of a connected labelling algorithm by Thell Fowler (https://github.com/Thell/ccloutline) and exports an reimplementation of this algorithm:
```{r eval=FALSE}
cclabel_landscape <- landscapemetrics::cclabel(landscape)
landscapetools::util_facetplot(cclabel_landscape, nrow = 1)
```
<img src="man/figures/cclabel.png"  width="100%" />

### Visualizing patches
To visualize patches in a landscape and encode each patch with an ID that can be used to compare a landscape metric with the actual landscape you can use the R package [*landscapetools*](https://github.com/ropensci/landscapetools) (currently only in the version on Github):

```{r eval=FALSE}
landscapetools::util_show_patches(landscape)
```
<img src="man/figures/showpatches.png"  width="100%" />


##  Contributing 

Bug reports, suggestions for new metrics, and especially code contributions are welcome. Please see [CONTRIBUTING.md](https://github.com/marcosci/landscapemetrics/blob/master/CONTRIBUTING.md). 
Maintainers and contributors must follow this repository's [code of conduct](CODE_OF_CONDUCT.md).
