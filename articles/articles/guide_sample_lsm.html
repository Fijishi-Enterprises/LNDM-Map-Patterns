<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sampling around points of interest • landscapemetrics | Landscape Metrics for Categorical Map Patterns</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/sandstone/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../../bootstrap-toc.css">
<script src="../../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../../pkgdown.css" rel="stylesheet">
<script src="../../pkgdown.js"></script><meta property="og:title" content="Sampling around points of interest">
<meta property="og:description" content="landscapemetrics">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../../index.html">landscapemetrics | Landscape Metrics for Categorical Map Patterns</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.5.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../../articles/getstarted.html">
    <span class="fa fa-magic"></span>
     
    Get Started
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-graduation-cap"></span>
     
    More
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/articles/general-background.html">
        <span class="fa fa-book"></span>
         
        General Background
      </a>
    </li>
    <li>
      <a href="../../articles/articles/comparing_tools.html">
        <span class="fa fa-edit"></span>
         
        Differences FRAGSTATS|landscapemetrics
      </a>
    </li>
    <li>
      <a href="../../articles/articles/new_metrics.html">
        <span class="fa fa-sticky-note"></span>
         
        New Metrics outside FRAGSTATS
      </a>
    </li>
    <li>
      <a href="../../articles/articles/utility.html">
        <span class="fa fa-comment"></span>
         
        Utility functions
      </a>
    </li>
    <li>
      <a href="../../articles/articles/guide_moving_window.html">
        <span class="fa fa-comment"></span>
         
        Moving window
      </a>
    </li>
    <li>
      <a href="../../articles/articles/guide_sample_lsm.html">
        <span class="fa fa-comment"></span>
         
        Sample metrics
      </a>
    </li>
    <li>
      <a href="../../articles/articles/landscape_distribution_statistics.html">
        <span class="fa fa-comment"></span>
         
        Landscape distribution statistics
      </a>
    </li>
    <li>
      <a href="../../articles/articles/publication_record.html">
        <span class="fa fa-file-text-o"></span>
         
        Publication Record
      </a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="../../news/index.html">
    <span class="fa fa-newspaper-o"></span>
     
    news
  </a>
</li>
<li>
  <a href="../../reference/index.html">
    <span class="fa fa-gears"></span>
     
    functions
  </a>
</li>
<li>
  <a href="https://github.com/r-spatialecology/landscapemetrics">
    <span class="fa fa-github fa-lg"></span>
     
    github
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="guide_sample_lsm_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Sampling around points of interest</h1>
            
            <h4 class="date">2021-08-18</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/r-spatialecology/landscapemetrics/blob/master/vignettes/articles/guide_sample_lsm.Rmd"><code>vignettes/articles/guide_sample_lsm.Rmd</code></a></small>
      <div class="hidden name"><code>guide_sample_lsm.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatialecology.github.io/landscapemetrics/">landscapemetrics</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://rspatial.org/raster">raster</a></span><span class="op">)</span></code></pre></div>
<p><strong>landscapemetrics</strong> provides several functions to sample metrics <em>at</em> or <em>around</em> sample points. On possible application for this feature could be a study in which the study organism only encounters the landscape within a local neighborhood of sample points. For most functions, sample points can be provided as a 2-column matrix(x- and y-coordinate), SpatialPoints and SpatialLines (<a href="https://cran.r-project.org/web/packages/sp/index.html"><strong>sp</strong></a>; Roger et al. 2013) and even <a href="https://cran.r-project.org/web/packages/sf/index.html"><strong>sf</strong></a> objects (Pebesma 2018) are supported. For some functions, also SpatialPolygons (i.e. sample plots) can be provided.</p>
<p>First, we create some example sample locations.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># create some example points</span>
<span class="va">points</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">5</span>, <span class="fl">25</span>, <span class="fl">15</span>, <span class="fl">5</span>, <span class="fl">25</span><span class="op">)</span>, ncol <span class="op">=</span> <span class="fl">2</span>, byrow <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>

<span class="va">points</span>
<span class="co">##      [,1] [,2]</span>
<span class="co">## [1,]   10    5</span>
<span class="co">## [2,]   25   15</span>
<span class="co">## [3,]    5   25</span>

<span class="co"># create some example lines</span>
<span class="va">x1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">5</span>, <span class="fl">15</span>, <span class="fl">10</span><span class="op">)</span>
<span class="va">y1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">5</span>, <span class="fl">15</span>, <span class="fl">25</span><span class="op">)</span>
<span class="va">x2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">25</span><span class="op">)</span>
<span class="va">y2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">5</span><span class="op">)</span>
<span class="va">sample_lines</span> <span class="op">&lt;-</span> <span class="fu">sp</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/sp/man/SpatialLines.html">SpatialLines</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="fu">sp</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/sp/man/Line.html">Lines</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="fu">sp</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/sp/man/Line.html">Line</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html">cbind</a></span><span class="op">(</span><span class="va">x1</span>, <span class="va">y1</span><span class="op">)</span><span class="op">)</span>, 
                                                     <span class="fu">sp</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/sp/man/Line.html">Line</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html">cbind</a></span><span class="op">(</span><span class="va">x2</span>, <span class="va">y2</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>, ID <span class="op">=</span> <span class="st">"a"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>

<span class="va">sample_lines</span>
<span class="co">## class       : SpatialLines </span>
<span class="co">## features    : 1 </span>
<span class="co">## extent      : 1, 25, 1, 25  (xmin, xmax, ymin, ymax)</span>
<span class="co">## crs         : NA</span></code></pre></div>
<div id="extract-landscape-metrics-at-sample-points" class="section level2">
<h2 class="hasAnchor">
<a href="#extract-landscape-metrics-at-sample-points" class="anchor"></a>Extract landscape metrics at sample points</h2>
<p><code><a href="../../reference/extract_lsm.html">extract_lsm()</a></code> returns the metrics of all patches in which a sample point is located. However, since this only makes sense for individual patches, it’s only possible to extract patch-level metrics.</p>
<p><img src="guide_sample_lsm_files/figure-html/unnamed-chunk-2-1.png" width="700" style="display: block; margin: auto;"></p>
<p>Now, it’s straightforward to extract e.g. the patch area of all patches in which a sample point is located. Similar to all functions calculating several landscape metrics, the selected metrics can be specified by various arguments (see <code><a href="../../reference/list_lsm.html">list_lsm()</a></code> for more details). The resulting tibble includes one extra column (compared to <code><a href="../../reference/calculate_lsm.html">calculate_lsm()</a></code>), indicating the ID of the sample points.</p>
<p>Because three sample points were provided and only the patch area was requested, the resulting tibble also has three rows - one for each sample point. The first and the second sample point are actually located in the same patch and following also the area is identical. The third sample point is located in a much smaller patch. The <em>tibble</em> gives also information about the patch ids and the land-cover classes in which sample points are located.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../../reference/extract_lsm.html">extract_lsm</a></span><span class="op">(</span><span class="va">landscape</span>, y <span class="op">=</span> <span class="va">points</span>, what <span class="op">=</span> <span class="st">"lsm_p_area"</span><span class="op">)</span>
<span class="co">## Warning: Only using 'what' argument.</span>
<span class="co">## Warning: Please use 'check_landscape()' to ensure the input data is valid.</span>
<span class="co">## # A tibble: 3 × 7</span>
<span class="co">##   layer level class    id metric  value extract_id</span>
<span class="co">##   &lt;int&gt; &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;   &lt;dbl&gt;      &lt;dbl&gt;</span>
<span class="co">## 1     1 patch     3    24 area   0.0457          1</span>
<span class="co">## 2     1 patch     3    24 area   0.0457          2</span>
<span class="co">## 3     1 patch     2    10 area   0.0035          3</span></code></pre></div>
<p>If a line is provided, the results include the patch-level metric for all patches touched by the line. The use of the function is exactly the same as for points.</p>
<p>For each patch, all core area metrics are returned. While the long line touches three patches (2, 12, 20), line two only touches two patches (20, 25). In this example, all core are metrics are selected for extraction.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../../reference/extract_lsm.html">extract_lsm</a></span><span class="op">(</span><span class="va">landscape</span>, y <span class="op">=</span> <span class="va">sample_lines</span>, type <span class="op">=</span> <span class="st">"core area metric"</span><span class="op">)</span>
<span class="co">## Warning: Please use 'check_landscape()' to ensure the input data is valid.</span>
<span class="co">## # A tibble: 18 × 7</span>
<span class="co">##    layer level class    id metric   value extract_id</span>
<span class="co">##    &lt;int&gt; &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;    &lt;dbl&gt;      &lt;dbl&gt;</span>
<span class="co">##  1     1 patch     1     3 cai    48.0             1</span>
<span class="co">##  2     1 patch     2    13 cai    44.9             1</span>
<span class="co">##  3     1 patch     2    16 cai    16.7             1</span>
<span class="co">##  4     1 patch     3    24 cai    49.2             1</span>
<span class="co">##  5     1 patch     1     3 core    0.0071          1</span>
<span class="co">##  6     1 patch     2    13 core    0.0044          1</span>
<span class="co">##  7     1 patch     2    16 core    0.0004          1</span>
<span class="co">##  8     1 patch     3    24 core    0.0225          1</span>
<span class="co">##  9     1 patch     1     3 ncore   3               1</span>
<span class="co">## 10     1 patch     2    13 ncore   2               1</span>
<span class="co">## 11     1 patch     2    16 ncore   3               1</span>
<span class="co">## 12     1 patch     3    24 ncore  11               1</span>
<span class="co">## 13     1 patch     2    13 cai    44.9             2</span>
<span class="co">## 14     1 patch     3    24 cai    49.2             2</span>
<span class="co">## 15     1 patch     2    13 core    0.0044          2</span>
<span class="co">## 16     1 patch     3    24 core    0.0225          2</span>
<span class="co">## 17     1 patch     2    13 ncore   2               2</span>
<span class="co">## 18     1 patch     3    24 ncore  11               2</span></code></pre></div>
</div>
<div id="sample-landscape-metrics-at-sample-points" class="section level2">
<h2 class="hasAnchor">
<a href="#sample-landscape-metrics-at-sample-points" class="anchor"></a>Sample landscape metrics at sample points</h2>
<p>To sample landscape metrics within a certain buffer <em>around</em> sample points, there is <code><a href="../../reference/sample_lsm.html">sample_lsm()</a></code>. Now, the size of the buffers around the sample locations must be specified. The functions clips the landscape within the buffer (in other words sample plots) and calculates the selected metrics.</p>
<p>The resulting <em>tibble</em> incldues two extra columns. Again, the id of the sample point is included. Furthermore, the size of the actual sampled landscape can be different to the provided size due to two reasons. Firstly, because clipping raster cells using a circle or a sample plot not directly at a cell center lead to inaccuracies. Secondly, sample plots can exceed the landscape boundary. Therefore, we report the actual clipped sample plot area relative in relation to the theoretical, maximum sample plot area e.g. a sample plot only half within the landscape will have a <code>percentage_inside = 50</code>.</p>
<p><img src="guide_sample_lsm_files/figure-html/unnamed-chunk-5-1.png" width="700" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../../reference/sample_lsm.html">sample_lsm</a></span><span class="op">(</span><span class="va">landscape</span>, y <span class="op">=</span> <span class="va">points</span>, size <span class="op">=</span> <span class="fl">10</span>, 
           level <span class="op">=</span> <span class="st">"landscape"</span>, type <span class="op">=</span> <span class="st">"diversity metric"</span>, 
           classes_max <span class="op">=</span> <span class="fl">3</span>,
           verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>
<span class="co">## # A tibble: 27 × 8</span>
<span class="co">##    layer level     class    id metric     value plot_id percentage_inside</span>
<span class="co">##    &lt;int&gt; &lt;chr&gt;     &lt;int&gt; &lt;int&gt; &lt;chr&gt;      &lt;dbl&gt;   &lt;int&gt;             &lt;dbl&gt;</span>
<span class="co">##  1     1 landscape    NA    NA msidi      0.954       1                75</span>
<span class="co">##  2     1 landscape    NA    NA msiei      0.868       1                75</span>
<span class="co">##  3     1 landscape    NA    NA pr         3           1                75</span>
<span class="co">##  4     1 landscape    NA    NA prd    10000           1                75</span>
<span class="co">##  5     1 landscape    NA    NA rpr      100           1                75</span>
<span class="co">##  6     1 landscape    NA    NA shdi       1.02        1                75</span>
<span class="co">##  7     1 landscape    NA    NA shei       0.932       1                75</span>
<span class="co">##  8     1 landscape    NA    NA sidi       0.615       1                75</span>
<span class="co">##  9     1 landscape    NA    NA siei       0.922       1                75</span>
<span class="co">## 10     1 landscape    NA    NA msidi      0.969       2                75</span>
<span class="co">## # … with 17 more rows</span></code></pre></div>
<p>It’s also possible to construct buffers around lines, however, only if the <a href="https://cran.r-project.org/web/packages/rgeos/index.html"><strong>rgeos</strong></a> (Bivand &amp; Rundel 2018) package is installed. Also, it’s possibe to directly provide SpatialPolygons as sample plots.</p>
<div id="references" class="section level3">
<h3 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h3>
<p>Pebesma, E., 2018. Simple Features for R: Standardized Support for Spatial Vector Data. The R Journal, <a href="https://journal.r-project.org/archive/2018/RJ-2018-009/" class="uri">https://journal.r-project.org/archive/2018/RJ-2018-009/</a></p>
<p>Roger Bivand and Colin Rundel (2018). rgeos: Interface to Geometry Engine - Open Source (‘GEOS’). R package version 0.4-2. <a href="https://CRAN.R-project.org/package=rgeos" class="uri">https://CRAN.R-project.org/package=rgeos</a></p>
<p>Roger S. Bivand, Edzer Pebesma, Virgilio Gomez-Rubio, 2013. Applied spatial data analysis with R, Second edition. Springer, NY. <a href="http://www.asdar-book.org/" class="uri">http://www.asdar-book.org/</a></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Maximillian H.K. Hesselbarth, Marco Sciaini, Jakub Nowosad, Sebastian Hanss.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
