<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Moving window • landscapemetrics | Landscape Metrics for Categorical Map Patterns</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/sandstone/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../../pkgdown.css" rel="stylesheet">
<script src="../../pkgdown.js"></script><meta property="og:title" content="Moving window">
<meta property="og:description" content="">
<meta property="og:image" content="/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../../index.html">landscapemetrics | Landscape Metrics for Categorical Map Patterns</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../../articles/getstarted.html">
    <span class="fa fa fa fa-magic"></span>
     
    Get Started
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-graduation-cap"></span>
     
    More
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/articles/general-background.html">
        <span class="fa fa-book"></span>
         
        General Background
      </a>
    </li>
    <li>
      <a href="../../articles/articles/comparing_tools.html">
        <span class="fa fa-edit"></span>
         
        Differences FRAGSTATS|landscapemetrics
      </a>
    </li>
    <li>
      <a href="../../articles/articles/new_metrics.html">
        <span class="fa fa-sticky-note"></span>
         
        New Metrics outside FRAGSTATS
      </a>
    </li>
    <li>
      <a href="../../articles/articles/utility.html">
        <span class="fa fa-comment"></span>
         
        Utility functions
      </a>
    </li>
    <li>
      <a href="../../articles/articles/guide_moving_window.html">
        <span class="fa fa-comment"></span>
         
        Moving window
      </a>
    </li>
    <li>
      <a href="../../articles/articles/guide_sample_lsm.html">
        <span class="fa fa-comment"></span>
         
        Sample metrics
      </a>
    </li>
    <li>
      <a href="../../articles/articles/publication_record.html">
        <span class="fa fa-file-text-o"></span>
         
        Publication Record
      </a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="../../news/index.html">
    <span class="fa fa-newspaper-o"></span>
     
    news
  </a>
</li>
<li>
  <a href="../../reference/index.html">
    <span class="fa fa-gears"></span>
     
    functions
  </a>
</li>
<li>
  <a href="https://github.com/r-spatialecology/landscapemetrics">
    <span class="fa fa-github fa-lg"></span>
     
    github
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Moving window</h1>
            
            <h4 class="date">2019-03-04</h4>
      
      
      <div class="hidden name"><code>guide_moving_window.Rmd</code></div>

    </div>

    
    
<p>Landscape analysis are scale dependent (Šímová 2012). One approach to deal with this, is using a moving window (Zanker 2016). For each focal cell in the landscape, a matrix is used to specify the neighborhood and the metric value of this local neighborhood assigned to each focal cell (Fletcher 2018). Thereby, the windows are allowed to overlap (McGarigal et al. 2012). Following, the result will be a raster with the identical extent as the input, however each cell now describes the neighborhood in regard of the variability of the chosen metric (Zanker 2016). Of course, the selection of the matrix size largely influences the scale of the result (Zanker 2016).</p>
<div id="implementation-in-landscapemetrics" class="section level2">
<h2 class="hasAnchor">
<a href="#implementation-in-landscapemetrics" class="anchor"></a>Implementation in <strong>landscapemetrics</strong>
</h2>
<p>To analyse a input raster using the moving window approach in <strong>landscapemetrics</strong> we provide the function <code><a href="../../reference/window_lsm.html">window_lsm()</a></code>. The function allows to specify the neighborhood using a matrix and uses internally the <code><a href="https://www.rdocumentation.org/packages/raster/topics/focal">raster::focal()</a></code> function. Currently, only landscape level metrics are possible to calculate and can be specified similar to <code><a href="../../reference/calculate_lsm.html">calculate_lsm()</a></code>. For details, see <code>?list_lsm()</code>.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(landscapemetrics)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(landscapetools)</a>
<a class="sourceLine" id="cb1-3" data-line-number="3"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(raster)</a></code></pre></div>
<p>First, we need to specify the local neighborhood matrix. This matrix must have uneven sides, in which the focal cell is always the center cell. Because we want to weight all cells identically, all values need to be 1 (for more details, see <code>?raster::focal()</code>).</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1">moving_window &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/matrix">matrix</a></span>(<span class="dv">1</span>, <span class="dt">nrow =</span> <span class="dv">3</span>, <span class="dt">ncol =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb2-2" data-line-number="2">moving_window</a></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    1    1
## [2,]    1    1    1
## [3,]    1    1    1</code></pre>
<p>Now, we can easily pass this matrix to <code><a href="../../reference/window_lsm.html">window_lsm()</a></code> together with the input landscape. For this example, we want to calculate the number of classes (<code>lsm_l_pr</code>) and the joint entropy (<code>lsm_l_joinent</code>) for the local neighborhoods. To be type-stable, the result will be a nested list. The first level includes all layers of a <code>RasterStack</code> (only 1 if a <code>RasterLayer</code> is provided), the second level all selected metrics.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">result &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/window_lsm.html">window_lsm</a></span>(landscape, <span class="dt">window =</span> moving_window, <span class="dt">what =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"lsm_l_pr"</span>, <span class="st">"lsm_l_joinent"</span>))</a>
<a class="sourceLine" id="cb4-2" data-line-number="2">result</a></code></pre></div>
<pre><code>## [[1]]
## [[1]]$lsm_l_joinent
## class       : RasterLayer 
## dimensions  : 30, 30, 900  (nrow, ncol, ncell)
## resolution  : 1, 1  (x, y)
## extent      : 0, 30, 0, 30  (xmin, xmax, ymin, ymax)
## coord. ref. : NA 
## data source : in memory
## names       : layer 
## values      : 0, 3.093069  (min, max)
## 
## 
## [[1]]$lsm_l_pr
## class       : RasterLayer 
## dimensions  : 30, 30, 900  (nrow, ncol, ncell)
## resolution  : 1, 1  (x, y)
## extent      : 0, 30, 0, 30  (xmin, xmax, ymin, ymax)
## coord. ref. : NA 
## data source : in memory
## names       : layer 
## values      : 1, 3  (min, max)</code></pre>
<p>The resulting <code>RasterLayers</code> describe the local neighborhood according to the moving window around each focal cell. In the case of <code>lsm_l_pr</code> this the number of classes present.</p>
<p><img src="guide_moving_window_files/figure-html/plot-result-1.png" width="700" style="display: block; margin: auto;"><img src="guide_moving_window_files/figure-html/plot-result-2.png" width="700" style="display: block; margin: auto;"></p>
<p>In the future, we also plan to allow class level metrics, however, patch metrics are not meaningful (McGarigal 2012) and therefore will not be included at any time in the future.</p>
<div id="references" class="section level3">
<h3 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h3>
<ul>
<li><p>Fletcher, R., Fortin, M.-J. 2018. Spatial Ecology and Conservation Modeling: Applications with R. Springer International Publishing. 523 pages</p></li>
<li><p>Hagen-Zanker, A. (2016). A computational framework for generalized moving windows and its application to landscape pattern analysis. International journal of applied earth observation and geoinformation, 44, 205-216.</p></li>
<li><p>McGarigal, K., Cushman, S.A., and Ene E. 2012. FRAGSTATS v4: Spatial Pattern Analysis Program for Categorical and Continuous Maps. Computer software program produced by the authors at the University of Massachusetts, Amherst. Available at the following website: <a href="http://www.umass.edu/landeco/research/fragstats/fragstats.html" class="uri">http://www.umass.edu/landeco/research/fragstats/fragstats.html</a></p></li>
<li><p>Šímová, P., &amp; Gdulová, K. 2012. Landscape indices behavior: A review of scale effects. Applied Geography, 34, 385–394.</p></li>
</ul>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#implementation-in-landscapemetrics">Implementation in <strong>landscapemetrics</strong></a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Maximillian H.K. Hesselbarth, Marco Sciaini, Jakub Nowosad, Sebastian Hanss.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
