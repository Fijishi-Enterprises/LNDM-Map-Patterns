---
title: "Communicate landscapemetrics results"
date: "`r Sys.Date()`"
output:
  github_document:
    html_preview: false
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r load_libraries_hidden, eval=TRUE, echo=FALSE, message=FALSE, results='hide'}
library(landscapemetrics)
library(ggplot2)
library(patchwork)
library(raster)
library(dplyr)
library(landscapetools)

# landscape_plot <- util_plot(landscape) + theme_void() + guides(fill = FALSE) + coord_equal()
```

## Plot metrics

come up with ggplot wrapper for metrics to show metrics and compare landscapes

## Visualizing patches

To visualize patches in a landscape and encode each patch with an ID that can be used to compare a landscape metric with the actual landscape you can use the auxiliary visualisation function `show_patches()`:

```{r eval=FALSE}
library(landscapetools)
library(patchwork)
library(landscapemetrics)
library(ggplot2)

# Create plot of the landscape
landscape_plot <- util_plot(landscape) + theme_void() + guides(fill = FALSE) + coord_equal()

# Plot landscape + landscape with labeled patches
landscape_plot  + show_patches(landscape) + plot_layout(ncol = 1)
```
<center>
![](showpatches.png){width=75%}
</center>

### Dissecting a landscape

If you are interested in each class and want to get an impression of the spatial distribution of this class, 
the [**landscapetools**](https://github.com/ropensci/landscapetools) package offers a function to plot 
lists, stacks and bricks of rasters as facets:

```{r fig.retina=2}
# prepare plot for podlasie raster
landscape_plot <- util_plot(podlasie_ccilc) + theme_void() + guides(fill = FALSE) + coord_equal()

# run connected labeling for podlasie raster
patches <- cclabel(podlasie_ccilc)

# show landscape and a single facet with every patch for all classes in podlasie
landscape_plot +
    util_facetplot(patches) +
    plot_layout(ncol = 1)
```



## Connected labelling 

`landscapemetrics` makes internally heavy use of an implementatian of the connected labelling algorithm by Thell Fowler (https://github.com/Thell/ccloutline) and exports an reimplementation of this algorithm:

```{r eval=FALSE}
cclabel_landscape <- cclabel(landscape)
util_facetplot(cclabel_landscape, nrow = 1)
```

![](cclabel.png){width=100%}
